<!-- server/src/templates/emails/order-confirmation.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Order Confirmation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 600px;
      margin: 0 auto;
    }
    .header {
      background-color: #f8f8f8;
      padding: 20px;
      text-align: center;
      border-bottom: 3px solid #3498db;
    }
    .content {
      padding: 20px;
    }
    .order-details {
      margin: 20px 0;
      border: 1px solid #eee;
      padding: 15px;
    }
    .order-table {
      width: 100%;
      border-collapse: collapse;
    }
    .order-table th, .order-table td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    .order-total {
      font-weight: bold;
      margin-top: 15px;
      text-align: right;
    }
    .button {
      display: inline-block;
      background-color: #3498db;
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 4px;
      margin: 20px 0;
    }
    .footer {
      font-size: 12px;
      text-align: center;
      margin-top: 20px;
      color: #999;
      border-top: 1px solid #eee;
      padding-top: 20px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Order Confirmation</h1>
    <p>Order #{{order.order_number}}</p>
  </div>
  <div class="content">
    <p>Hello {{name}},</p>
    <p>Thank you for your order! We've received your purchase and are processing it now.</p>
    
    <div class="order-details">
      <h2>Order Summary</h2>
      <p><strong>Order Date:</strong> {{order.created_at}}</p>
      <p><strong>Order Status:</strong> {{order.status}}</p>
      <p><strong>Payment Method:</strong> {{order.payment_method}}</p>
      
      <h3>Items</h3>
      <table class="order-table">
        <thead>
          <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          {{#each order.items}}
          <tr>
            <td>{{this.name}}</td>
            <td>{{this.quantity}}</td>
            <td>${{this.unit_price}}</td>
          </tr>
          {{/each}}
        </tbody>
      </table>
      
      <div class="order-total">
        <p>Subtotal: ${{order.subtotal}}</p>
        <p>Shipping: ${{order.shipping_amount}}</p>
        <p>Tax: ${{order.tax_amount}}</p>
        {{#if order.discount_amount}}
        <p>Discount: -${{order.discount_amount}}</p>
        {{/if}}
        <p>Total: ${{order.total_amount}}</p>
      </div>
    </div>
    
    <h3>Shipping Address</h3>
    <p>
      {{order.shipping_address.first_name}} {{order.shipping_address.last_name}}<br>
      {{order.shipping_address.address_line1}}<br>
      {{#if order.shipping_address.address_line2}}
        {{order.shipping_address.address_line2}}<br>
      {{/if}}
      {{order.shipping_address.city}}, {{order.shipping_address.state}} {{order.shipping_address.postal_code}}<br>
      {{order.shipping_address.country}}
    </p>
    
    <p><a href="{{trackingUrl}}" class="button">Track Your Order</a></p>
    
    <p>If you have any questions or concerns about your order, please contact our customer service team.</p>
    <p>Thank you for shopping with us!</p>
    <p>Best regards,<br>The Team</p>
  </div>
  <div class="footer">
    <p>This email was sent to {{email}} regarding your order #{{order.order_number}}.</p>
  </div>
</body>
</html>